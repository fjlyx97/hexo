---
title: Git的初步体验
date: 2017-09-17 10:54:44
tags: 
- Git
- 编程
categories : "Git"
---

> - 初步了解Git的使用，在此做下笔记。
> - 涉及Git安装配置，创建版本库以及其他多方面内容，防止自己遗忘。

<!--more-->

# Git的安装
- 安装过程极度简单，不做记录。

# Git的账号配置
```git
git config --global user.name "你的名字"
git config --global user.email "你的邮箱"
```
- git conifg命令中的--global参数，用了这个参数，表示这台机器所有用户都会使用这个配置，也可以不添加。
# 创建版本库
1. 选择合适地方创建空目录
2. 在当前目录下使用如下代码来初始化仓库。
```git
git init
```
- 可以观察到当前目录下生成了 **.git** 的文件夹,如果没有特殊情况，最好不要修改这个目录。
# 添加文件
- 一般情况下，不要使用windows自带的记事本去编辑文件，容易出各种奇怪的错误。
- 使用如下代码添加文件
```
git add 文件名
```
- 使用如下代码提交到仓库
```
git commit -m "注释"
```
> - -m 后面为修改的注释，一般情况下最好添加，也方便自己以后查看修改记录。
> - commit可以一次提交多个文件，所以最好 **add**多个文件后，使用commit提交。

# 查看状态
- 使用如下代码查看当前状态：
```
git status
```
> 这条命令可以让我们掌握仓库的状态，产看那些文件已经更改过了。

- 使用如下代码查看详细状态
```
git diff HEAD --文件名
```
> - 此条命令可以让我们查询到文件做了哪些更改。
> - 需要注意的是这是对比工作区和缓存区的差别，所以需要先使用add提交。

# 查看日志
- 使用如下代码查看文件修改过的日志
```
git log
```
> 可以加上 **--pretty=oneline**,出现的是commit的版本号，有 **Head**的那一行为最新修改的版本。

# 查看文件历史变动的内容
- 有的时候我们需要回看文件修改的内容，可以使用
```
git log --pretty=oneline  #获取文件的哈希值
git show 哈希值
```

# 版本回退
- 使用如下代码回退版本
```
git reset --hard HEAD^
#亦或者使用
git reset --hard 回退后的id
```
> - **注意**,在windows平台中的cmd下，符号 **^**应当使用双引号括起来，它是特殊字符，否则会出现 **More?** 的现象。
> - 上一个版本是 **HEAD^**，上上个版本则是 **HEAD^^** ，以此类推。
> - 当版本数过多的时候，使用^容易数不过来，可以使用 **HEAD~100** 来回退版本。
> - 如果不小心回退错误，可以使用:  **git reset --hard 版本号**来回退版本。 只需写版本号前几位即可，系统会进行自动查找。

# 获取回退后的ID
- 使用如下代码
```
git reflog
```
>  - 这条命令可以显示你之前输入的所有命令，以此来获得 **commit id**。
>  - 这条命令用于记录输入过的命令。

# 跟踪修改
- git跟踪的是修改内容而非文件本身，如果不使用 **add**将文件添加至暂存区， **commit**只会提交暂存区的内容，所以文件不会发生改变。
# 丢弃修改
## 未使用 **add**前
- **提交前**,使用如下代码，可以丢弃工作区的修改：
```
git chekout -- 文件名
```
可以撤销修改
- 此处中的 **--** 十分重要，缺少其中一个则可能编程另外一个命令。
## 使用了 **add**后
- **提交后，**我们可以使用如下命令，来讲暂存区的修改回退为工作区：
```
git reset HEAD 文件名
```
# 删除文件
## 一般情况下
- 一般情况下，直接将文件删除，这时可以使用如下代码，来查看状态：
```
git status
```
这时Git知道我们删除了文件，工作区和版本库不一致，我们可以使用如下代码，来完成删除并提交：
```
git rm 文件名
git commit -m "删除注释"
```
## 误删的情况
- 如果是误删了文件，我们可以使用如下代码来恢复文件：
```
git checkout -- 文件名
```
> - **git checkout** 其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以“一键还原”。
> - 恢复只能恢复到 **最近一次** 提交的内容。

# 创建远程仓库
- 首先先观察在系统盘用户目录下是否存在 **.ssh** 的文件夹,并观察是否有id_rsa和id_rsa.pub这两个文件。
- 如果不存在说明没有密钥，使用如下代码创建密钥：
```
ssh-keygen -t rsa -C "你的邮箱"
```
- 并在github里面添加id_rsa.pub这个文件中的密钥。

# 添加远程库
- 首先在Github上面使用 **New repository** 创建新的仓库。
- 接下来使用如下代码来关联仓库:
```
git remote add origin git@github.com:fjlyx97/TestRespository.git
```
**注意其中的名字变换**，远程库的名字就是origin，Git的默认叫法。
- 使用如下代码来将本地库的内容推送到远程库上：
```
git push -u origin master
```
> - 第一次可以使用 **-u**的参数，可以将本地的master分支内容推送的远程新的master分支。
> - 以后可以使用 **git push origin master**来直接推送。

- 可以使用如下代码来查看当前有的远程库
```
git remote
```

# 从远程库克隆
- 从零开始时最好先创建远程库，并使用如下代码：
```
git clone 地址
```

# 从远程仓库同步到本地仓库
- 当使用多台电脑编辑文件时，我们需要将远程仓库同步到本地仓库。
```
git pull
```

# 创建合并分支
- 我们可以使用如下代码来创建分支
```
git checkout -b 分支名 //创建分支并切换
//等同于
git branch 分支名
git checkout 分支名 //切换分支
```
- 可以使用如下命令查看分支
```
git branch
```
- 合并分支
```
git merge 分支名
```
- 删除分支
```
git branch -d 分支名
```

# 创建忽略文件
- 有的时候我们并不想所有文件都被同步到仓库中，所以我们可以通过创建一个 **.gitignore** 文件。
- github为我们准备了模板，可以点击：[gitignore模板](https://github.com/github/gitignore)
- 文件中以 **#** 开头的为注释，而 * 为通配符。

> - 这个方法针对未被提交的文件，如果文件已经被提交的话，需要输入如下代码:
> - git rm -r --cached .
> - git add .
> - git commit -m "注释"

# 大坑待填